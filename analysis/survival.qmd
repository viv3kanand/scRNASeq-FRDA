---
title: "Survival Analysis"
author: "viv3kanand"
format: html
editor: source
---

### Install packages

```{r}
#| label: install
#| echo: true
#| eval: false
options(renv.config.pak.enabled = TRUE)

renv::install("pharmaverse/ggsurvfit")
renv::install("survival")

```

### Load libraries

```{r}
#| label: packages
#| echo: true
#| eval: true
#| message: false
#| warning: false

require(DESeq2)
require(tidyverse)
require(survival)
require(ggsurvfit)
```

### Load data

```{r}
#| label: load data
#| echo: false
#| eval: true

count_bulk <- read_csv("../data/Bulk/FRDA_bulk_counts.csv") |> 
  dplyr::distinct(Gene, .keep_all = TRUE) |> 
  tibble::column_to_rownames("Gene")

meta_bulk <- read_csv("../data/Bulk/Metadata_bulk.csv") |>
  tibble::column_to_rownames("SampleID")
```

### Transform and filter data

```{r}
counts <- counts(dds, normalized=TRUE)

# filter genes whose expression is zero in more than half the samples
filter_fun <- function(x){
  x <- t(apply(as.matrix(x),1,as.numeric))
  r <- as.numeric(apply(x,1,function(i) sum(i == 0)))
  remove <- which(r > dim(x)[2]*0.5)
  return(remove)
}
remove <- filter_fun(counts)
counts <- counts[-remove,]
```

```{r}

```


































